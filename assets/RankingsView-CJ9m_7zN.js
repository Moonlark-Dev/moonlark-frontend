import{A as R,x as S,y as j,B as C,d as b,r as A,o as E,c as m,f as r,w as i,F as _,a as g,k as c,b as l,z as p,C as h,t as s,h as I}from"./index-BWFvY-3L.js";async function N(){return await(await fetch(R+"/rankings",{method:"GET"})).json()}async function T(u){let o={"Content-Type":"application/json"};return S()&&(o.Authorization=`Bearer ${j()}`),await(await fetch(C+u,{method:"GET",headers:o})).json()}const V=g("h1",null,"排行",-1),O=b({__name:"RankingsView",setup(u){const o=A({});async function*f(){const n=await N(),e=Object.values(n).map(async t=>[t.name,await T(t.uri)]);for(const t of await Promise.allSettled(e))t.status=="fulfilled"&&(yield t.value)}E(async()=>{const n={};for await(const e of f())n[e[0]]=e[1];o.value=n});function w(n){const e=new Date(n);return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)}return(n,e)=>{const t=c("mdui-list-item"),k=c("mdui-divider"),y=c("mdui-collapse-item"),x=c("mdui-collapse"),B=c("mdui-list");return l(),m(_,null,[V,r(B,null,{default:i(()=>[r(x,{accordion:""},{default:i(()=>[(l(!0),m(_,null,p(Object.entries(o.value),([v,d])=>(l(),h(y,null,{default:i(()=>[r(t,{slot:"header",icon:"leaderboard"},{default:i(()=>[g("h3",null,s(v)+" ("+s(d.total)+") - "+s(w(d.time)),1)]),_:2},1024),(l(!0),m(_,null,p(d.users.sort((a,D)=>a.index>D.index?1:-1),a=>(l(),h(t,null,{default:i(()=>[I(s(a.index)+". "+s(a.nickname)+" ("+s(a.info??a.user_id)+") - "+s(a.data),1)]),_:2},1024))),256)),r(k,{inset:""})]),_:2},1024))),256))]),_:1})]),_:1})],64)}}});export{O as default};
