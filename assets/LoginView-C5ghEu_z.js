import{g as B}from"./prefix-Bm0P3Ktm.js";import{d as L,r as n,n as M,c as r,q as h,f as c,w as N,e as I,a,h as d,t as S,u as D,F as $,s as A,k as C,b as v,p as E,m as F,i as T,_ as q}from"./index-CNbrXZBK.js";const p=e=>(E("data-v-0f735959"),e=e(),F(),e),z=p(()=>a("h1",null,"登录",-1)),P=p(()=>a("p",null,null,-1)),U=p(()=>a("p",null,"请在 Moonlark 中输入以下指令进行激活: ",-1)),j=L({__name:"LoginView",props:{isMobile:Boolean},emits:["pageChanged"],setup(e,{emit:y}){const b=y,m=e,l=n(0),f=n("获取中 ..."),s=n(null);let i=Array(),u=n(0);async function k(){await T()&&b("pageChanged","home")}function w(){u.value-=1}async function x(){let t=await A(s.value);f.value=`${await B()}account verify ${t.activate_code}`,l.value=1,u.value=t.effective_time,i.push(setInterval(k,1e3)),i.push(setInterval(w,1e3))}return M(()=>{i.forEach(t=>{clearInterval(t)})}),(t,o)=>{const _=C("mdui-text-field"),V=C("mdui-button");return v(),r($,null,[z,l.value===0?(v(),r("div",{key:0,class:h({form:!m.isMobile})},[c(_,{label:"用户ID",value:s.value,onInput:o[0]||(o[0]=g=>s.value=g.target.value),clearable:""},null,8,["value"]),P,c(V,{onClick:o[1]||(o[1]=g=>x())},{default:N(()=>[d("确认")]),_:1})],2)):I("",!0),l.value===1?(v(),r("div",{key:1,class:h({form:!m.isMobile})},[U,c(_,{value:f.value,readonly:""},null,8,["value"]),a("small",null,[d("请在 "),a("strong",null,S(D(u))+"s",1),d(" 内完成登录验证")])],2)):I("",!0)],64)}}}),J=q(j,[["__scopeId","data-v-0f735959"]]);export{J as default};
