import{A as R,x as S,y as j,B as C,d as b,r as A,o as E,c as m,f as d,w as i,F as _,a as g,k as c,b as l,z as p,C as h,t as o,h as I}from"./index-CNbrXZBK.js";async function N(){return await(await fetch(R+"/rankings",{method:"GET"})).json()}async function T(u){const s={"Content-Type":"application/json"};return S()&&(s.Authorization=`Bearer ${j()}`),await(await fetch(C+u,{method:"GET",headers:s})).json()}const V=g("h1",null,"排行",-1),O=b({__name:"RankingsView",setup(u){const s=A({});async function*f(){const a=await N(),e=Object.values(a).map(async t=>[t.name,await T(t.uri)]);for(const t of await Promise.allSettled(e))t.status=="fulfilled"&&(yield t.value)}E(async()=>{const a={};for await(const e of f())a[e[0]]=e[1];s.value=a});function w(a){const e=new Date(a);return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)}return(a,e)=>{const t=c("mdui-list-item"),y=c("mdui-divider"),k=c("mdui-collapse-item"),x=c("mdui-collapse"),B=c("mdui-list");return l(),m(_,null,[V,d(B,null,{default:i(()=>[d(x,{accordion:""},{default:i(()=>[(l(!0),m(_,null,p(Object.entries(s.value),([v,r])=>(l(),h(k,{key:r},{default:i(()=>[d(t,{slot:"header",icon:"leaderboard"},{default:i(()=>[g("h3",null,o(v)+" ("+o(r.total)+") - "+o(w(r.time)),1)]),_:2},1024),(l(!0),m(_,null,p(r.users.sort((n,D)=>n.index>D.index?1:-1),n=>(l(),h(t,{key:n},{default:i(()=>[I(o(n.index)+". "+o(n.nickname)+" ("+o(n.info??n.user_id)+") - "+o(n.data),1)]),_:2},1024))),128)),d(y,{inset:""})]),_:2},1024))),128))]),_:1})]),_:1})],64)}}});export{O as default};
